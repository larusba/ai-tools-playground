"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/vector-rag/route";
exports.ids = ["app/api/vector-rag/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("dns");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("string_decoder");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvector-rag%2Froute&page=%2Fapi%2Fvector-rag%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvector-rag%2Froute.ts&appDir=%2FUsers%2Fgiuseppevillani%2FDocuments%2FProjects%2Fvercel-ai-sdk%2Fvercel-ai-app%2Fvercel-neo4j-ai-openai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fgiuseppevillani%2FDocuments%2FProjects%2Fvercel-ai-sdk%2Fvercel-ai-app%2Fvercel-neo4j-ai-openai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvector-rag%2Froute&page=%2Fapi%2Fvector-rag%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvector-rag%2Froute.ts&appDir=%2FUsers%2Fgiuseppevillani%2FDocuments%2FProjects%2Fvercel-ai-sdk%2Fvercel-ai-app%2Fvercel-neo4j-ai-openai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fgiuseppevillani%2FDocuments%2FProjects%2Fvercel-ai-sdk%2Fvercel-ai-app%2Fvercel-neo4j-ai-openai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_giuseppevillani_Documents_Projects_vercel_ai_sdk_vercel_ai_app_vercel_neo4j_ai_openai_app_api_vector_rag_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/vector-rag/route.ts */ \"(rsc)/./app/api/vector-rag/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/vector-rag/route\",\n        pathname: \"/api/vector-rag\",\n        filename: \"route\",\n        bundlePath: \"app/api/vector-rag/route\"\n    },\n    resolvedPagePath: \"/Users/giuseppevillani/Documents/Projects/vercel-ai-sdk/vercel-ai-app/vercel-neo4j-ai-openai/app/api/vector-rag/route.ts\",\n    nextConfigOutput,\n    userland: _Users_giuseppevillani_Documents_Projects_vercel_ai_sdk_vercel_ai_app_vercel_neo4j_ai_openai_app_api_vector_rag_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/vector-rag/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ2ZWN0b3ItcmFnJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ2ZWN0b3ItcmFnJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdmVjdG9yLXJhZyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmdpdXNlcHBldmlsbGFuaSUyRkRvY3VtZW50cyUyRlByb2plY3RzJTJGdmVyY2VsLWFpLXNkayUyRnZlcmNlbC1haS1hcHAlMkZ2ZXJjZWwtbmVvNGotYWktb3BlbmFpJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmdpdXNlcHBldmlsbGFuaSUyRkRvY3VtZW50cyUyRlByb2plY3RzJTJGdmVyY2VsLWFpLXNkayUyRnZlcmNlbC1haS1hcHAlMkZ2ZXJjZWwtbmVvNGotYWktb3BlbmFpJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN3RTtBQUNySjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3ZlcmNlbC1uZW80ai1haS1vcGVuYWkvPzQ1MzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2dpdXNlcHBldmlsbGFuaS9Eb2N1bWVudHMvUHJvamVjdHMvdmVyY2VsLWFpLXNkay92ZXJjZWwtYWktYXBwL3ZlcmNlbC1uZW80ai1haS1vcGVuYWkvYXBwL2FwaS92ZWN0b3ItcmFnL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS92ZWN0b3ItcmFnL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdmVjdG9yLXJhZ1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvdmVjdG9yLXJhZy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9naXVzZXBwZXZpbGxhbmkvRG9jdW1lbnRzL1Byb2plY3RzL3ZlcmNlbC1haS1zZGsvdmVyY2VsLWFpLWFwcC92ZXJjZWwtbmVvNGotYWktb3BlbmFpL2FwcC9hcGkvdmVjdG9yLXJhZy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvdmVjdG9yLXJhZy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvector-rag%2Froute&page=%2Fapi%2Fvector-rag%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvector-rag%2Froute.ts&appDir=%2FUsers%2Fgiuseppevillani%2FDocuments%2FProjects%2Fvercel-ai-sdk%2Fvercel-ai-app%2Fvercel-neo4j-ai-openai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fgiuseppevillani%2FDocuments%2FProjects%2Fvercel-ai-sdk%2Fvercel-ai-app%2Fvercel-neo4j-ai-openai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/vector-rag/route.ts":
/*!*************************************!*\
  !*** ./app/api/vector-rag/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _lib_neo4j__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/neo4j */ \"(rsc)/./lib/neo4j.ts\");\n/* harmony import */ var _lib_embeddings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/embeddings */ \"(rsc)/./lib/embeddings.ts\");\n\n\nasync function POST(req) {\n    const { query, topK = 3 } = await req.json();\n    const qVec = await (0,_lib_embeddings__WEBPACK_IMPORTED_MODULE_1__.embed)(query);\n    const res = await (0,_lib_neo4j__WEBPACK_IMPORTED_MODULE_0__.runQuery)(\"MATCH (d:Doc) RETURN d.text AS text, d.embedding AS embedding\");\n    const scored = res.map((r)=>{\n        const text = r.get(\"text\");\n        const embedding = JSON.parse(r.get(\"embedding\") || \"[]\");\n        return {\n            text,\n            score: (0,_lib_embeddings__WEBPACK_IMPORTED_MODULE_1__.cosineSim)(qVec, embedding)\n        };\n    });\n    const top = scored.sort((a, b)=>b.score - a.score).slice(0, topK);\n    return Response.json({\n        query,\n        results: top\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3ZlY3Rvci1yYWcvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXVDO0FBQ2E7QUFFN0MsZUFBZUcsS0FBS0MsR0FBWTtJQUNyQyxNQUFNLEVBQUVDLEtBQUssRUFBRUMsT0FBTyxDQUFDLEVBQUUsR0FBRyxNQUFNRixJQUFJRyxJQUFJO0lBQzFDLE1BQU1DLE9BQU8sTUFBTVAsc0RBQUtBLENBQUNJO0lBRXpCLE1BQU1JLE1BQU0sTUFBTVQsb0RBQVFBLENBQ3hCO0lBR0YsTUFBTVUsU0FBU0QsSUFBSUUsR0FBRyxDQUFDQyxDQUFBQTtRQUNyQixNQUFNQyxPQUFPRCxFQUFFRSxHQUFHLENBQUM7UUFDbkIsTUFBTUMsWUFBWUMsS0FBS0MsS0FBSyxDQUFDTCxFQUFFRSxHQUFHLENBQUMsZ0JBQWdCO1FBQ25ELE9BQU87WUFBRUQ7WUFBTUssT0FBT2hCLDBEQUFTQSxDQUFDTSxNQUFNTztRQUFXO0lBQ25EO0lBRUEsTUFBTUksTUFBTVQsT0FBT1UsSUFBSSxDQUFDLENBQUNDLEdBQUVDLElBQU1BLEVBQUVKLEtBQUssR0FBR0csRUFBRUgsS0FBSyxFQUFFSyxLQUFLLENBQUMsR0FBR2pCO0lBQzdELE9BQU9rQixTQUFTakIsSUFBSSxDQUFDO1FBQUVGO1FBQU9vQixTQUFTTjtJQUFJO0FBQzdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmVyY2VsLW5lbzRqLWFpLW9wZW5haS8uL2FwcC9hcGkvdmVjdG9yLXJhZy9yb3V0ZS50cz81NjI0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJ1blF1ZXJ5IH0gZnJvbSBcIkAvbGliL25lbzRqXCI7XG5pbXBvcnQgeyBlbWJlZCwgY29zaW5lU2ltIH0gZnJvbSBcIkAvbGliL2VtYmVkZGluZ3NcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBSZXF1ZXN0KSB7XG4gIGNvbnN0IHsgcXVlcnksIHRvcEsgPSAzIH0gPSBhd2FpdCByZXEuanNvbigpO1xuICBjb25zdCBxVmVjID0gYXdhaXQgZW1iZWQocXVlcnkpO1xuXG4gIGNvbnN0IHJlcyA9IGF3YWl0IHJ1blF1ZXJ5KFxuICAgIFwiTUFUQ0ggKGQ6RG9jKSBSRVRVUk4gZC50ZXh0IEFTIHRleHQsIGQuZW1iZWRkaW5nIEFTIGVtYmVkZGluZ1wiXG4gICk7XG5cbiAgY29uc3Qgc2NvcmVkID0gcmVzLm1hcChyID0+IHtcbiAgICBjb25zdCB0ZXh0ID0gci5nZXQoXCJ0ZXh0XCIpO1xuICAgIGNvbnN0IGVtYmVkZGluZyA9IEpTT04ucGFyc2Uoci5nZXQoXCJlbWJlZGRpbmdcIikgfHwgXCJbXVwiKTtcbiAgICByZXR1cm4geyB0ZXh0LCBzY29yZTogY29zaW5lU2ltKHFWZWMsIGVtYmVkZGluZykgfTtcbiAgfSk7XG5cbiAgY29uc3QgdG9wID0gc2NvcmVkLnNvcnQoKGEsYikgPT4gYi5zY29yZSAtIGEuc2NvcmUpLnNsaWNlKDAsIHRvcEspO1xuICByZXR1cm4gUmVzcG9uc2UuanNvbih7IHF1ZXJ5LCByZXN1bHRzOiB0b3AgfSk7XG59XG4iXSwibmFtZXMiOlsicnVuUXVlcnkiLCJlbWJlZCIsImNvc2luZVNpbSIsIlBPU1QiLCJyZXEiLCJxdWVyeSIsInRvcEsiLCJqc29uIiwicVZlYyIsInJlcyIsInNjb3JlZCIsIm1hcCIsInIiLCJ0ZXh0IiwiZ2V0IiwiZW1iZWRkaW5nIiwiSlNPTiIsInBhcnNlIiwic2NvcmUiLCJ0b3AiLCJzb3J0IiwiYSIsImIiLCJzbGljZSIsIlJlc3BvbnNlIiwicmVzdWx0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/vector-rag/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/embeddings.ts":
/*!***************************!*\
  !*** ./lib/embeddings.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cosineSim: () => (/* binding */ cosineSim),\n/* harmony export */   embed: () => (/* binding */ embed)\n/* harmony export */ });\n/* harmony import */ var ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ai */ \"(rsc)/./node_modules/ai/dist/index.mjs\");\n/* harmony import */ var _ai_sdk_openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ai-sdk/openai */ \"(rsc)/./node_modules/@ai-sdk/openai/dist/index.mjs\");\n\n\nasync function embed(text) {\n    const result = await (0,ai__WEBPACK_IMPORTED_MODULE_0__.generateText)({\n        model: (0,_ai_sdk_openai__WEBPACK_IMPORTED_MODULE_1__.openai)(\"text-embedding-3-small\"),\n        prompt: text\n    });\n    return Array.from(result.text).map((c)=>c.charCodeAt(0));\n}\nfunction cosineSim(a, b) {\n    const dot = a.reduce((acc, val, i)=>acc + val * b[i], 0);\n    const magA = Math.sqrt(a.reduce((acc, val)=>acc + val * val, 0));\n    const magB = Math.sqrt(b.reduce((acc, val)=>acc + val * val, 0));\n    return dot / (magA * magB);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZW1iZWRkaW5ncy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWtDO0FBQ007QUFFakMsZUFBZUUsTUFBTUMsSUFBWTtJQUN0QyxNQUFNQyxTQUFTLE1BQU1KLGdEQUFZQSxDQUFDO1FBQ2hDSyxPQUFPSixzREFBTUEsQ0FBQztRQUNkSyxRQUFRSDtJQUNWO0lBQ0EsT0FBT0ksTUFBTUMsSUFBSSxDQUFDSixPQUFPRCxJQUFJLEVBQUVNLEdBQUcsQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRUMsVUFBVSxDQUFDO0FBQ3ZEO0FBRU8sU0FBU0MsVUFBVUMsQ0FBVyxFQUFFQyxDQUFXO0lBQ2hELE1BQU1DLE1BQU1GLEVBQUVHLE1BQU0sQ0FBQyxDQUFDQyxLQUFLQyxLQUFLQyxJQUFNRixNQUFNQyxNQUFNSixDQUFDLENBQUNLLEVBQUUsRUFBRTtJQUN4RCxNQUFNQyxPQUFPQyxLQUFLQyxJQUFJLENBQUNULEVBQUVHLE1BQU0sQ0FBQyxDQUFDQyxLQUFLQyxNQUFRRCxNQUFNQyxNQUFJQSxLQUFLO0lBQzdELE1BQU1LLE9BQU9GLEtBQUtDLElBQUksQ0FBQ1IsRUFBRUUsTUFBTSxDQUFDLENBQUNDLEtBQUtDLE1BQVFELE1BQU1DLE1BQUlBLEtBQUs7SUFDN0QsT0FBT0gsTUFBT0ssQ0FBQUEsT0FBT0csSUFBRztBQUMxQiIsInNvdXJjZXMiOlsid2VicGFjazovL3ZlcmNlbC1uZW80ai1haS1vcGVuYWkvLi9saWIvZW1iZWRkaW5ncy50cz9hZWZhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdlbmVyYXRlVGV4dCB9IGZyb20gXCJhaVwiO1xuaW1wb3J0IHsgb3BlbmFpIH0gZnJvbSBcIkBhaS1zZGsvb3BlbmFpXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbWJlZCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcltdPiB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdlbmVyYXRlVGV4dCh7XG4gICAgbW9kZWw6IG9wZW5haShcInRleHQtZW1iZWRkaW5nLTMtc21hbGxcIiksXG4gICAgcHJvbXB0OiB0ZXh0XG4gIH0pO1xuICByZXR1cm4gQXJyYXkuZnJvbShyZXN1bHQudGV4dCkubWFwKGMgPT4gYy5jaGFyQ29kZUF0KDApKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvc2luZVNpbShhOiBudW1iZXJbXSwgYjogbnVtYmVyW10pOiBudW1iZXIge1xuICBjb25zdCBkb3QgPSBhLnJlZHVjZSgoYWNjLCB2YWwsIGkpID0+IGFjYyArIHZhbCAqIGJbaV0sIDApO1xuICBjb25zdCBtYWdBID0gTWF0aC5zcXJ0KGEucmVkdWNlKChhY2MsIHZhbCkgPT4gYWNjICsgdmFsKnZhbCwgMCkpO1xuICBjb25zdCBtYWdCID0gTWF0aC5zcXJ0KGIucmVkdWNlKChhY2MsIHZhbCkgPT4gYWNjICsgdmFsKnZhbCwgMCkpO1xuICByZXR1cm4gZG90IC8gKG1hZ0EgKiBtYWdCKTtcbn1cbiJdLCJuYW1lcyI6WyJnZW5lcmF0ZVRleHQiLCJvcGVuYWkiLCJlbWJlZCIsInRleHQiLCJyZXN1bHQiLCJtb2RlbCIsInByb21wdCIsIkFycmF5IiwiZnJvbSIsIm1hcCIsImMiLCJjaGFyQ29kZUF0IiwiY29zaW5lU2ltIiwiYSIsImIiLCJkb3QiLCJyZWR1Y2UiLCJhY2MiLCJ2YWwiLCJpIiwibWFnQSIsIk1hdGgiLCJzcXJ0IiwibWFnQiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/embeddings.ts\n");

/***/ }),

/***/ "(rsc)/./lib/neo4j.ts":
/*!**********************!*\
  !*** ./lib/neo4j.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   driver: () => (/* binding */ driver),\n/* harmony export */   runQuery: () => (/* binding */ runQuery)\n/* harmony export */ });\n/* harmony import */ var neo4j_driver__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! neo4j-driver */ \"(rsc)/./node_modules/neo4j-driver/lib/index.js\");\n/* harmony import */ var neo4j_driver__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(neo4j_driver__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dotenv */ \"(rsc)/./node_modules/dotenv/lib/main.js\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dotenv__WEBPACK_IMPORTED_MODULE_1__);\n\n\ndotenv__WEBPACK_IMPORTED_MODULE_1___default().config();\nconst driver = neo4j_driver__WEBPACK_IMPORTED_MODULE_0___default().driver(process.env.NEO4J_URI, neo4j_driver__WEBPACK_IMPORTED_MODULE_0___default().auth.basic(process.env.NEO4J_USER, process.env.NEO4J_PASSWORD));\nasync function runQuery(query, params = {}) {\n    const session = driver.session();\n    try {\n        const res = await session.run(query, params);\n        return res.records;\n    } finally{\n        await session.close();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbmVvNGoudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWlDO0FBQ0w7QUFDNUJDLG9EQUFhO0FBRU4sTUFBTUUsU0FBU0gsMERBQVksQ0FDaENJLFFBQVFDLEdBQUcsQ0FBQ0MsU0FBUyxFQUNyQk4sd0RBQVUsQ0FBQ1EsS0FBSyxDQUNkSixRQUFRQyxHQUFHLENBQUNJLFVBQVUsRUFDdEJMLFFBQVFDLEdBQUcsQ0FBQ0ssY0FBYyxHQUU1QjtBQUVLLGVBQWVDLFNBQVNDLEtBQWEsRUFBRUMsU0FBUyxDQUFDLENBQUM7SUFDdkQsTUFBTUMsVUFBVVgsT0FBT1csT0FBTztJQUM5QixJQUFJO1FBQ0YsTUFBTUMsTUFBTSxNQUFNRCxRQUFRRSxHQUFHLENBQUNKLE9BQU9DO1FBQ3JDLE9BQU9FLElBQUlFLE9BQU87SUFDcEIsU0FBVTtRQUNSLE1BQU1ILFFBQVFJLEtBQUs7SUFDckI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3ZlcmNlbC1uZW80ai1haS1vcGVuYWkvLi9saWIvbmVvNGoudHM/OGRmNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbmVvNGogZnJvbSBcIm5lbzRqLWRyaXZlclwiO1xuaW1wb3J0IGRvdGVudiBmcm9tIFwiZG90ZW52XCI7XG5kb3RlbnYuY29uZmlnKCk7XG5cbmV4cG9ydCBjb25zdCBkcml2ZXIgPSBuZW80ai5kcml2ZXIoXG4gIHByb2Nlc3MuZW52Lk5FTzRKX1VSSSEsXG4gIG5lbzRqLmF1dGguYmFzaWMoXG4gICAgcHJvY2Vzcy5lbnYuTkVPNEpfVVNFUiEsXG4gICAgcHJvY2Vzcy5lbnYuTkVPNEpfUEFTU1dPUkQhXG4gIClcbik7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5RdWVyeShxdWVyeTogc3RyaW5nLCBwYXJhbXMgPSB7fSkge1xuICBjb25zdCBzZXNzaW9uID0gZHJpdmVyLnNlc3Npb24oKTtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBzZXNzaW9uLnJ1bihxdWVyeSwgcGFyYW1zKTtcbiAgICByZXR1cm4gcmVzLnJlY29yZHM7XG4gIH0gZmluYWxseSB7XG4gICAgYXdhaXQgc2Vzc2lvbi5jbG9zZSgpO1xuICB9XG59XG4iXSwibmFtZXMiOlsibmVvNGoiLCJkb3RlbnYiLCJjb25maWciLCJkcml2ZXIiLCJwcm9jZXNzIiwiZW52IiwiTkVPNEpfVVJJIiwiYXV0aCIsImJhc2ljIiwiTkVPNEpfVVNFUiIsIk5FTzRKX1BBU1NXT1JEIiwicnVuUXVlcnkiLCJxdWVyeSIsInBhcmFtcyIsInNlc3Npb24iLCJyZXMiLCJydW4iLCJyZWNvcmRzIiwiY2xvc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/neo4j.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@vercel","vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/rxjs","vendor-chunks/zod","vendor-chunks/neo4j-driver-bolt-connection","vendor-chunks/neo4j-driver-core","vendor-chunks/neo4j-driver","vendor-chunks/@ai-sdk","vendor-chunks/eventsource-parser","vendor-chunks/dotenv","vendor-chunks/tslib","vendor-chunks/ai"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvector-rag%2Froute&page=%2Fapi%2Fvector-rag%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvector-rag%2Froute.ts&appDir=%2FUsers%2Fgiuseppevillani%2FDocuments%2FProjects%2Fvercel-ai-sdk%2Fvercel-ai-app%2Fvercel-neo4j-ai-openai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fgiuseppevillani%2FDocuments%2FProjects%2Fvercel-ai-sdk%2Fvercel-ai-app%2Fvercel-neo4j-ai-openai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();